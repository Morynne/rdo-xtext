<html>
<head>
<link rel="stylesheet" type="text/css" href="../styles/rao_general.css">
<link rel="stylesheet" href="../styles/rao_highlight.css">
<meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
<script src="../scripts/thirdparty/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="../scripts/thirdparty/jquery-2.1.4.min.js"></script>
<script src="../scripts/table_of_contents.js"></script>
</head>
<body>
<h2>Точки принятия решений</h2>
<p>Для реализации подхода сканирования активностей, после каждого изменения состояния системы осуществляются проверки предусловий выполнения всех точек принятия решений модели (dpt). В случае, если одна из точек принятия может быть выполнена, запускается алгоритм проверки активностей точки. Активности представляют собой вызовы образцов модели с фиксированными параметрами.</p>
<p>Описание точки принятия решений имеет следующий вид:</p>
<pre><code class="rao">dpt <i>имя_точки_принятия_решений</i> {
    <i>инициализация_точки_принятия_решений</i>
    <i>список_активностей</i>
}</code></pre>
<h3>Инициализация точки принятия решений</h3>
<p>Инициализация точки принятия решений осуществляется с помощью метода <code class="rao">init()</code>. Внутри него могут быть вызваны три метода:</p>
<table style="width:100%">
    <tr>
        <th width="30%">Имя метода</th>
        <th width="70%">Описание</th>
    </tr>
    <tr>
        <td><pre><code class="rao">setParent(<i>имя_родительской_dpt</i>)</code></pre></td>
        <td>Задание родительской точки принятия решений. Если точка принятия решений имеет дочерние, то в процессе сканирования активностей будут просканированы все активности дочерней точки. При равном приоритете сначала будут просканированы активности дочерней точки.</td>
    </tr>
    <tr>
        <td><pre><code class="rao">setCondition(<i>логическое_выражение</i>)</code></pre></td>
        <td>Задание условия выполнения точки принятия решений. Если логическое выражение <code class="rao">ЛОЖНО</code>, то сканирование проводится не будет. Если в качестве логического выражения указано ключевое слово <code class="rao">any</code> или условие не задано вообще, то сканирование будет проводиться всегда.</td>
    </tr>
    <tr>
        <td><pre><code class="rao">setPriority(<i>арифметическое_выражение</i>)</code></pre></td>
        <td>Задание приоритета выполнения точки принятия решений. Результат арифметического выражения должен быть ограничен диапазоном [0,1]. Чем больше значение, тем выше приоритет. Если приоритет не задан, то он принимается равным 1.</td>
    </tr>
</table>
<p>Если ни один из параметров задавать не нужно, то метод <code class="rao">init()</code> может отсутствовать.</p>
<h3>Активности</h3>
<p>Точка принятия решений может иметь произвольное число активностей. Описание активности имеет следующий вид:</p>
<pre><code class="rao">activity <i>имя_активности</i>(<i>приоритет_активности</i>) checks <i>имя_образца</i>(<i>парамеры_образца</i>);</code></pre>
<p>Если приоритет не задан, он принимается равным единице. Примеры:</p>
<pre><code class="rao">dpt работа_токарного_цеха {
    set init() {
        setPriority(1);
    }
    activity входной_контроль_заготовок checks контроль_заготовок(Тип_заготовки.вал, Тип_контроля.входной);
    activity выходной_контроль_заготовок checks контроль_заготовок(Тип_заготовки.вал, Тип_контроля.выходной);
}

dpt токарная_обработка_валов {
    set init() {
        setParent(работа_токарного_цеха);
        setCondition(токарный_цех.число_необработанных_заготовок > 0);
    }
    activity черновая_обработка(0) checks образец_черновой_обработки(Тип_заготовки.вал, Тип_станка.токарный);
    activity чистовая_обработка(1) checks образец_чистовой_обработки(Тип_заготовки.вал, Тип_станка.токарный);
}

dpt работа_заготовительного_цеха {
    set init() {
        setPriority(0);
    }
    activity получение_заготовок checks образец_получения_заготовок();
}</code></pre>
</body>
</html>
